**Notes:**

1. The problem ask us to find the maximum profit that can be achieved, if we are given a price of the stock at the ith day. So price of the stock is the value in the list and day is the index of the list. But we have to following some conditions as well.
   1. We have to buy first in order to sell.
   2. If we have bought already then we can either sell it or do cooldown (skip the day)
   3. If we have just sold the stock then we must have to do a cooldown (skip the day)
   4. We have choice between buying and selling states and cooldown. If we are buying then we cannot sell of if we are selling then we cannot buy. So buying and selling is basically one state (true/false) and the second choice is to skip the day.
2. Now lets think about it in terms of decisions we have to take and know which decision will lead to what outcome. It is important to remeber that we have to find the maximum profit. So at any given index if we decide to buy, we have to subtract the price at ith from the current profit. If we decide to do a cooldown then the current profit will remain as is. If we are in a selling state, then we have to add the price at the ith index to the current profit. And if we decide a cooldown then the current profit will remain as is.
3. This problem can be solved with top down dynamic programming with the implementation of cache to store the results at every index.
4. So at each index we can buy or sell depending on the state. So our dfs method should know the index and buy and sell state. If we can buy, the state will be true. If we have already bought, then the state should be false. Buying and selling affects the profit. Cooldown will affect the profit and we simply skip a day (move to the next iteration)
5. What should be the cache structure for this problem? Basically we need to keep track of at each day what is maximum profit if we buy/sell. Cooldown doesnt effect the outcome. So index and the buying state should be the arguments of the recursive dfs method and the key of the cache should be a tuple of index and buying state. For value, we have two choices at a given index and a given state, buy/sell or do a cooldown. We have to calculate the max profit of these two choices at the given index. Since we have 2 states for every index buy/sell, our cache size will not be more than O(2.n). So the space complexity is O(n).
6. The base case for the problem is whenever we reach the end of the list we will simply return 0. If the result has been already computed in the cache then simply return the cached result.
7. The recursive case has to first filter with a condition whether the buying is available or not. If buying is available then we make a recursive call to find the maxprofit starting i + 1 and **subtract** the current price at i. This will give as the profit if we are buying. Then we calculate, if dont buy and do a cooldown, then we will simply make a recursive call to find the maxprofit starting i + 1 and this will be our current profit as well for the cooldown. Then after these two recursvie steps, we will update the result in the cache at ith index and current buying state by taking the max of buying profit and cooldown profit.
8. If buying is not available then we will simply do everything as above, then only different is when calculatinng selling we need to **add** the current price at i also if we sell, we cannot buy in the next iteration, so we make the recurisve call to when we will be eligible to buy, which i + 2. One more important thing is to not forget to change the buying state. Whenever we buy or sell, we take a not of the state when making the recursive call.
9. The timecomplexity of this problem is reduced to O(n) with cache. If we go without cache and simply following the decision tree then the time complexity will 2 ^ n. where n is the height of the tree and size of list and 2 is the number of choices at each state and index.
